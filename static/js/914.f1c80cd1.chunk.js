"use strict";(self.webpackChunktest_task=self.webpackChunktest_task||[]).push([[914],{9914:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var r,c=t(9941),i=function(e){return e.recipes},u=t(2791),s=t(7155),a=t(168),o=t(6444).ZP.li(r||(r=(0,a.Z)(["\n","\n"])),(function(e){return e.selected&&"border: 2px solid red;"})),l=t(7689),d=t(1087),f=t(184),p=function(){var e=(0,s.Z)(i),n=(0,s.Z)((function(e){return e.visibleRecipes})),t=(0,s.Z)((function(e){return e.selectRecipe})),r=(0,s.Z)((function(e){return e.selectedRecipes})),c=(0,s.Z)((function(e){return e.deleteButtonVisible})),a=(0,s.Z)((function(e){return e.deleteSelectedRecipes})),p=(0,u.useRef)(null),v=(0,l.TH)();(0,u.useEffect)((function(){var n=p.current,r=function(n){n.preventDefault();var r=n.target.closest("li").dataset.recipeId,c=e.find((function(e){return e.id.toString()===r}));t(c)};return n.addEventListener("contextmenu",r),function(){n.removeEventListener("contextmenu",r)}}),[e,t]);return(0,f.jsxs)("div",{ref:p,children:[(0,f.jsx)("ul",{children:n.map((function(e){return(0,f.jsx)(o,{"data-recipe-id":e.id,selected:r.includes(e),children:(0,f.jsxs)(d.rU,{to:"".concat(e.id),state:{from:v},children:[(0,f.jsxs)("h3",{children:[e.id,e.name]}),(0,f.jsx)("p",{children:e.tagline}),e.id,e.name]})},e.id)}))}),c&&(0,f.jsx)("button",{type:"button",onClick:function(){a()},children:"DELETE"})]})},v=function(){var e=(0,s.Z)((function(e){return e.fetchRecipes})),n=(0,s.Z)((function(e){return e.loading})),t=(0,s.Z)((function(e){return e.recipes})),r=(0,s.Z)((function(e){return e.currentPage})),i=(0,s.Z)((function(e){return e.totalPages})),a=(0,s.Z)((function(e){return e.nextPage})),o=(0,s.Z)((function(e){return e.prevPage})),l=(0,u.useRef)(null);return(0,u.useEffect)((function(){e(r)}),[e,r]),(0,u.useEffect)((function(){window.scrollTo(0,0)}),[r]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{children:"Recipes page"}),(0,f.jsxs)("div",{ref:l,children:[(0,f.jsx)(p,{}),!t.length&&(0,f.jsx)("p",{children:"You have already viewed all the recipes."})]}),n&&(0,f.jsx)(c.g,{}),(0,f.jsx)("button",{onClick:o,disabled:r<=1,children:"Previous"}),(0,f.jsx)("button",{onClick:a,disabled:r>=i||!t.length,children:"Next"})]})}},7155:function(e,n,t){var r=t(4165),c=t(3433),i=t(8683),u=t(5861),s=t(1243),a=t(5847),o="https://api.punkapi.com/v2/beers",l=(0,a.Ue)((function(e,n){return{recipes:[],loading:!1,error:null,currentPage:1,visibleRecipes:[],selectedRecipes:[],recipeDetails:[],deleteButtonVisible:!1,fetchRecipes:function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t){var u,a,l;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e({loading:!0}),n.prev=1,n.next=4,s.Z.get("".concat(o,"?page=").concat(t,"&per_page=").concat(30));case 4:return u=n.sent,n.next=7,u.data;case 7:a=n.sent,e((function(e){return(0,i.Z)((0,i.Z)({},e),{},{recipes:[].concat((0,c.Z)(e.recipes),(0,c.Z)(a)),loading:!1})})),e((function(e){var n=15*(t-1),r=15*t,c=e.recipes.slice(n,r);return(0,i.Z)((0,i.Z)({},e),{},{visibleRecipes:c,loading:!1})})),n.next=20;break;case 12:if(n.prev=12,n.t0=n.catch(1),l=n.t0,400!==n.t0.statusCode){n.next=19;break}return n.next=18,n.t0.json();case 18:l=n.sent;case 19:e({error:l});case 20:return n.prev=20,e({loading:!1}),n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[1,12,20,23]])})));return function(e){return n.apply(this,arguments)}}(),nextPage:function(){e((function(e){return{currentPage:e.currentPage+1}}))},prevPage:function(){e((function(e){return{currentPage:e.currentPage-1}}))},selectRecipe:function(n){e((function(e){return{selectedRecipes:e.selectedRecipes.includes(n)?e.selectedRecipes.filter((function(e){return e!==n})):[].concat((0,c.Z)(e.selectedRecipes),[n]),deleteButtonVisible:!0}}))},deleteSelectedRecipes:function(){e((function(e){var n=e.recipes.filter((function(n){return!e.selectedRecipes.includes(n)}));return(0,i.Z)((0,i.Z)({},e),{},{recipes:n,loading:!1,error:null,selectedRecipes:[],deleteButtonVisible:!1})})),e((function(e){var n=15*(e.currentPage-1),t=15*e.currentPage;return{visibleRecipes:e.recipes.slice(n,t),loading:!1}}))},getRecipeById:function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t){var c,i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((function(){return{loading:!0}})),n.prev=1,n.next=4,s.Z.get("".concat(o,"/").concat(t));case 4:return c=n.sent,n.t0=e,n.next=8,c.data[0];case 8:n.t1=n.sent,n.t2={recipeDetails:n.t1,isLoading:!1},(0,n.t0)(n.t2),n.next=21;break;case 13:if(n.prev=13,n.t3=n.catch(1),i=n.t3,400!==n.t3.statusCode){n.next=20;break}return n.next=19,n.t3.json();case 19:i=n.sent;case 20:e({error:i});case 21:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()}}));n.Z=l}}]);
//# sourceMappingURL=914.f1c80cd1.chunk.js.map